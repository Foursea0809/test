<!DOCTYPE html>
<html lang="zh-Hant-Tw">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linkin Park</title>
    <link rel="stylesheet" href="style.css">
    <script>
        const API_KEY = 'AIzaSyDBlmzJZGUO8QAKwdcH8FJPKh64T3b_YjM';
const API_ID = '491927014195-cve61bomorg41tg8k51n9hv4etpjglne.apps.googleusercontent.com';
const PLAYLIST_ID = 'PLMC9KNkIncKtPzgY-5rmhvj7fax8fdxoj';

var videoVisible = 0;
var maxVideoVisible = 50;

const playlistItems = [];
const playlist = document.getElementsByClassName("playlist")[0];

// From Google API Docs
function initAPIClient() {
  gapi.load("client:auth2", function() {
    gapi.auth2.init({client_id: API_ID});
    loadClient().then(getPlaylistItems);
  });  
};

// From Google API Docs
function loadClient() {
  gapi.client.setApiKey(API_KEY);
  return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
    .then(
    function() { 
      console.log("GAPI client loaded for API"); },
    function(err) { 
      console.error("Error loading GAPI client for API", err); 
    });
}

function getPlaylistItems(pageToken) {
    return gapi.client.youtube.playlistItems.list({
      "part": "snippet,contentDetails",
      "maxResults": 50, // This is the maximum available value, according to the google docs
      "playlistId": PLAYLIST_ID,
      pageToken
    })
      .then(function(response) {
      const { items, nextPageToken } = response.result;
      
      // The items[] is an array of a playlist items.
      // nextPageToken - if empty - there are no items left to fetch
      
      playlistItems.push(...items);
      
      // It's up to you, how to handle the item from playlist. 
      // Add `onclick` events to navigate to another video, or use another thumbnail image quality 
      var index = 0;
      items.forEach(function(item) {
          const thumbnailItem = createPlaylistItem(item, index);
          playlist.appendChild(thumbnailItem);
          index++;
        });
      
      maxVideoVisible = index - 3;
      

      // Recursively get another portion of items, if there any left
      if (nextPageToken) {
        getPlaylistItems(nextPageToken);        
      }
    },
  function(err) { console.error("Execute error", err); });
}

function createPlaylistItem(i, index) {
  var changeIndex = index;
  const item = document.createElement('div');
  item.classList.add('playlist-item');
  item.style.background = `url(https://i.ytimg.com/vi/${i.snippet.resourceId.videoId}/mqdefault.jpg) no-repeat center`;
  item.style.backgroundSize = 'contain';
  item.id = index.toString();
  item.addEventListener("click", function(){ 
    document.getElementById('iframe_yt').src = "https://youtube.com/playlist?list=PL9LkJszkF_Z6bJ82689htd2wch-HVbzCO" + changeIndex.toString();
  });
  return item;
};

// Before doing any action with the API ->
initAPIClient();

function goUp(){
  if (videoVisible > 0){
    videoVisible--;
    document.getElementById(videoVisible.toString()).style.height = "90px";
  }
}
function goDown(){
    if (videoVisible < maxVideoVisible){
      document.getElementById(videoVisible.toString()).style.height = "0px";
     videoVisible++;    
  }  
}

    </script>
    <style>
        body {
            border-width: 10px;
            background-color: lavender;
            display: grid;
            font-size: 2rem;
            min-height: 100vh;
            grid-template-columns: 1fr 5fr 1fr;
            grid-template-rows: 50px 1fr minmax(100px, max-content);

        }
        
        header {
            background-color: black;
            grid-column: 1/-1;
            font-style:italic ;
            text-align: center;
            vertical-align:middle;
        }
        
        article {
            background-color:gainsboro;
            text-align: center;
            
        }
        
        main {
           
            background-repeat:no-repeat;
            background-size: contain;
            background-attachment: scroll;
           
        }
        
        main p{
            color:black;
            
            
        }
        aside {
 
            background-repeat: no-repeat;
            background-position: top 50px center;
            background-size:contain;
            background-attachment:scroll;
            text-align: center;
            
        }
        footer {
            background-color:gray;
            grid-column: 2/-1;
           
            
           
        }
        .video-container {
    position: relative;
    padding-bottom: 56.25%;
    padding-top: 30px; 
    height: 0; 
    overflow: hidden;
}
 
.video-container iframe,
.video-container object,
.video-container embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0 none;
    
}
#root {
  display: flex;
}

.playlist {
  display: flex;
  box-sizing: border-box;
  flex-direction: column;
  margin: 0 20px;
  height: 270px;
  width: 150px;
  overflow-y: hidden;
}

.playlist-item {
  display: flex;
  box-sizing: border-box;
  width: 100%;
  height: 90px;
  flex-shrink: 0;
  transition: all 0.3s;
}
.center_arrow{
  width: 190px;
  text-align: center;
}
#iframe_yt{
  margin-top: 29px;
}
img:hover, .playlist-item:hover {
  cursor: pointer;
}
    </style>
</head>

<body>
    

    <header><span style="color:white">Linkin Park</span></header>
    <article>
        <p><a href="../index.html" >首頁</a></p>
        <p><a href="../group/index.html" >樂團成員</a></p>
        <p><a href="index.html" >音樂介紹</a></p>
    </article>
    
    <main>
       
   
    </main>
    <aside>
        <div id="root">
            <iframe 
                    width="438" 
                    height="250"         
                    src="https://www.youtube.com/embed/7mrE9P3SDmU" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen="1"
                    id="iframe_yt"
                    ></iframe>
            <div>
              <div class="center_arrow">
                <img src="http://aux.iconspalace.com/uploads/drop-down-vector-icon-256.png" width="25px" style="transform: scaleY(-1);" onClick="goUp();"/>
              </div>
              <div class="playlist"></div>
              <div class="center_arrow">
                <img src="http://aux.iconspalace.com/uploads/drop-down-vector-icon-256.png" width="25px" onClick="goDown();"/>
                </div>
            </div>
          </div>  
    </aside>
    <footer>
      
    </footer>
</body>

</html>